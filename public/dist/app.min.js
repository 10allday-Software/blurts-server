function _dntEnabled(a,b){"use strict";var c=a||navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,d=b||navigator.userAgent,e=d.match(/Firefox\/(\d+)/),f=/MSIE|Trident/i,g=f.test(d),h=d.match(/Windows.+?(?=;)/g);return!(g&&"function"!=typeof Array.prototype.indexOf)&&(c=e&&32>parseInt(e[1],10)?"Unspecified":g&&h&&-1!==["Windows NT 6.1","Windows NT 6.2","Windows NT 6.3"].indexOf(h.toString())?"Unspecified":{0:"Disabled",1:"Enabled"}[c]||"Unspecified","Enabled"===c)}function browserName(){try{return /firefox|FxiOS/i.test(navigator.userAgent)?"firefox":/edge/i.test(navigator.userAgent)?"edge":/trident/i.test(navigator.userAgent)?"ie":/chrome/i.test(navigator.userAgent)?"chrome":/safari/i.test(navigator.userAgent)?"safari":"other"}catch(a){return"unknown"}}if("firefox"===browserName()&&(document.getElementById("download-firefox")||document.getElementById("download-firefox-bar"))&&document.querySelectorAll(".download-firefox").forEach(a=>{a.classList.add("hide")}),_dntEnabled()||function(b,c,d,e,f,g,h){b.GoogleAnalyticsObject=f,b[f]=b[f]||function(){(b[f].q=b[f].q||[]).push(arguments)},b[f].l=1*new Date,g=c.createElement(d),h=c.getElementsByTagName(d)[0],g.async=1,g.src=e,h.parentNode.insertBefore(g,h)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),"undefined"!=typeof ga){ga("create","UA-77033033-16"),ga("set","anonymizeIp",!0);const a=document.location;let b=a.pathname+a.search;a.search&&(a.search.includes("token=")||a.search.includes("hash="))&&(b=a.pathname,ga("set","location",b),ga("set","page",b)),ga("send","pageview")}const getLocation=()=>{const a=document.querySelectorAll("[data-page-label]");return 0<a.length?`Page ID: ${a[0].dataset.pageLabel}`:`Page ID: ${ga_getLocation()}`},sendPing=async(a,b,c=null)=>{if("undefined"!=typeof ga&&!a.classList.contains("hide")){c||(c=`${getLocation()}`);const d=`[v2] ${a.dataset.eventCategory}`;return d.includes("Scan")&&(c=`${c} [Signed in user: ${document.body.dataset.signedInUser}]`),ga("send","event",d,b,c)}},getFxaUtms=a=>{const b=encodeURIComponent(document.body.dataset.serverUrl.replace(/(^\w+:|^)\/\//g,""));return a.searchParams.append("utm_source",b),a.searchParams.append("utm_campaign",document.body.dataset.utmCampaign),a.searchParams.append("form_type","email"),a};const toggleMenu=(a,b)=>{document.body.classList.toggle("menu-open"),document.body.classList.contains("menu-open")?(document.getElementById("close-menu").addEventListener("click",()=>{toggleMenu(a,b)}),a.forEach(a=>{a.tabIndex=-1}),b.forEach(a=>{a.tabIndex=0})):(a.forEach(a=>{a.tabIndex=0}),b.forEach(a=>{a.tabIndex=-1}))};if(document.querySelector("#avatar-wrapper")){const a=document.getElementById("avatar-wrapper"),b=document.querySelectorAll("button, a:not(.fxa-menu-link), input"),c=document.querySelectorAll(".fxa-menu-link");a.addEventListener("focus",()=>{a.addEventListener("keydown",a=>[32,13].includes(a.keyCode)?(a.preventDefault(),a.stopImmediatePropagation(),toggleMenu(b,c)):27===a.keyCode&&document.body.classList.contains("menu-open")?toggleMenu(b,c):void 0)}),c.forEach(a=>{a.addEventListener("focus",()=>{a.addEventListener("keyup",a=>{27===a.keyCode&&(a.preventDefault(),a.stopImmediatePropagation(),toggleMenu(b,c))})})})}if("use strict","undefined"==typeof TextEncoder){const a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.src="/dist/edge.min.js",b.parentNode.insertBefore(a,b)}const eventList={Social:{eventCategory:"Social",eventAction:"Share"},SignUp:{eventCategory:"Sign Ups",eventAction:"Button Click"},SignUp_Complete:{eventCategory:"Sign Ups",eventAction:"Complete"},Resend:{eventCategory:"Resend Confirmation Email",eventAction:"Button Click"},CloseModal:{eventCategory:"Modal Closes",eventAction:"Closed Modal"},Unsubscribe:{eventCategory:"Unsubscribe",eventAction:"Button Click"},UnsubscribeSurvey:{eventCategory:"Unsubscribe Survey Submittal",eventAction:"Button Click"},Scan:{eventCategory:"Scans",eventAction:""},ShowAdditional:{eventCategory:"Show Additional Breaches",eventAction:"Button Click"},Pageview:{eventCategory:"Views",eventAction:""},Download:{eventCategory:"Download",eventAction:"Firefox Download"},Link:{eventCategory:"Link Clicks",eventAction:"Link Click"},ShareByEmail:{eventCategory:"ShareByEmail",eventAction:"Shared Firefox Monitor"}};function ga_getLocation(){return document.querySelector(".landing-content")?document.getElementById("sensitive-featured-breach")?"Sensitive Featured Breach Page":document.getElementById("featured-breach")?"Featured Breach Page":"Landing Page":document.getElementById("found-breaches")?"Scan Results - found breaches":document.getElementById("no-breaches")?"Scan Results - no breaches":document.getElementById("unsubscribe")?"Unsubscribe Page":document.getElementById("unsubscribe-survey")?"Unsubscribe Survey":document.getElementById("subpage")&&"error"===document.getElementById("subpage").getAttribute("data-analytics-id")?"Error":document.getElementById("confirmation")?"Account Confirmation Page":"Firefox Monitor"}function ga_sendLegacyPing(a,b){if("undefined"!=typeof ga){const c=eventList[a],d=c.eventCategory,e=c.eventAction;return b=b?b+" --- "+ga_getLocation():ga_getLocation(),ga("send","event",d,e,b)}}function isValidEmail(a){const b=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test((a+"").toLowerCase())}function removeInvalidMessage(a){const b=a.target.form;b.classList.remove("invalid")}function doOauth(a){let b=new URL("/oauth/init",document.body.dataset.serverUrl);if(b=getFxaUtms(b),["flowId","flowBeginTime","entrypoint"].forEach(c=>{b.searchParams.append(c,encodeURIComponent(a.dataset[c]))}),0<sessionStorage.length){const a=sessionStorage.getItem(`scanned_${sessionStorage.length}`);b.searchParams.append("email",a)}window.location.assign(b)}function setModalTabbing(){let a=Array.from(document.getElementById("subscribe-to-ffxm").querySelectorAll("a, input, button"));return document.getElementById("subscribe-to-ffxm").classList.contains("show")||(a=Array.from(document.getElementById("confirm-your-account").querySelectorAll("a, input, button"))),document.body.classList.contains("show-subscribe-modal")?void document.querySelectorAll("a, button, input").forEach(b=>{b.setAttribute("tabindex",a.includes(b)?"1":"-1")}):void document.querySelectorAll("a, button, input").forEach(b=>{b.setAttribute("tabindex",a.includes(b)?"-1":"1")})}const focusFirstInput=function(a){a.target.querySelector("input")&&a.target.querySelector("input").focus(),a.target.removeEventListener("transitioned",focusFirstInput)};function closeModalWindow(){document.body.classList.remove("show-subscribe-modal"),document.getElementById("subscribe-to-ffxm").classList.remove("show");document.getElementById("subscribe-modal").classList.contains("fxa-enabled")||(document.getElementById("confirm-your-account").classList.remove("show","sending","sent"),document.getElementById("subscribe-form").classList.remove("invalid"),document.getElementById("subscribe-email-input").value="",document.getElementById("additional-emails-checkbox").checked=!1,setModalTabbing())}function openModalWindow(){const a=document.getElementById("subscribe-modal");if(document.body.classList.add("show-subscribe-modal"),document.getElementById("subscribe-to-ffxm").classList.add("show"),setModalTabbing(),a.classList.contains("fxa-enabled"))return;const b=document.getElementById("subscribe-form");sendPing(b,"View"),document.getElementById("modal-terms").addEventListener("click",()=>{sendPing(b,"Terms Engage")}),document.getElementById("subscribe-form").classList.remove("loading-data"),a.addEventListener("transitionend",a=>focusFirstInput(a)),a.addEventListener("click",function c(d){d.target===a&&(document.getElementById("subscribe-to-ffxm").classList.contains("show")?(sendPing(b,"Cancel"),ga_sendLegacyPing("CloseModal","Clicked outside modal to close - Before Sign Up")):ga_sendLegacyPing("CloseModal","Clicked outside modal to close - After Sign Up"),closeModalWindow(),document.getElementById("subscribe-modal").removeEventListener("click",c))})}function checkBoxStates(a){a.preventDefault();let b;if(9===a.keyCode||16===a.keyCode)return b=a.target,void(b.focused=!0);if(32===a.keyCode&&(b=a.target),a.target.classList.contains("checkbox-group")){const c=a.target;b=c.querySelector("input[type=checkbox]")}b.checked=!b.checked}const resendSubscribeData=function(){ga_sendLegacyPing("Resend",!1),document.getElementById("confirm-your-account").classList.add("sending");const a={email:document.getElementById("submitted-email").textContent};postData("/user/add",a).then(()=>{document.getElementById("confirm-your-account").classList.add("sent"),document.getElementById("resend-data").removeEventListener("click",resendSubscribeData)}).catch(a=>console.error(a))},addUser=a=>{const b=a.target,c={};c.email=b.querySelector("#subscribe-email-input").value,b.querySelector("input[type=checkbox]").checked&&(c.additionalEmails="Opt user in to additional emails"),postData(b.action,c).then(()=>{document.getElementById("subscribe-to-ffxm").classList.remove("show"),document.getElementById("confirm-your-account").classList.add("show"),setModalTabbing(),document.getElementById("submitted-email").textContent=c.email,document.getElementById("resend-data").addEventListener("click",resendSubscribeData)}).catch(a=>console.error(a))},unsubscribeSurvey=a=>{const b=a.target;ga_sendLegacyPing("UnsubscribeSurvey",b.querySelector("input[type='radio']:checked").dataset.analyticsLabel);postData(b.action,{}).then(()=>{b.classList.add("show-thankyou")})},postData=(a,b={})=>fetch(a,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},referrer:"no-referrer",body:JSON.stringify(b)}).then(a=>a.json()).catch(a=>console.error(a)),toggleClasses=(a,b)=>{a.forEach(a=>{b.classList.toggle(a)})},showAdditionalBreaches=()=>{const a=document.getElementById("show-all-breaches-wrapper"),b=document.getElementById("additional-breaches");[a,b].forEach(a=>{toggleClasses(["show","hide"],a)})},handleRadioButtons=function(a){const b=Array.from(a.querySelectorAll(".radio-button-group, .button"));for(let c=0;c<b.length;c++){const d=b[c];d.addEventListener("focus",()=>{a.classList.contains("invalid")&&a.classList.remove("invalid"),d.addEventListener("keydown",a=>{38===a.keyCode&&b[c-1]&&b[c-1].focus(),40===a.keyCode&&b[c+1]&&b[c+1].focus(),32===a.keyCode&&d.classList.contains("radio-button-group")&&(b[c].querySelector("input").checked=!0)})})}};function addFormListeners(){Array.from(document.forms).forEach(a=>{if(a.querySelector("input[type=email]")){const b=a.querySelector("input[type=email]");b.addEventListener("keydown",a=>removeInvalidMessage(a)),"subscribe-form"===a.id?b.addEventListener("keydown",()=>{""===b.value&&sendPing(a,"Engage")}):b.addEventListener("focus",()=>{""===b.value&&sendPing(a,"Engage")})}if(a.querySelector("input[type=checkbox]")){const b=a.querySelector(".checkbox-group");b.addEventListener("click",a=>checkBoxStates(a)),b.addEventListener("keyup",a=>checkBoxStates(a))}a.querySelector("input[type=radio]")&&handleRadioButtons(a),a.addEventListener("submit",a=>handleFormSubmits(a))})}function handleFormSubmits(a){if("unsubscribe-form"===a.target.id)return void ga_sendLegacyPing("Unsubscribe",!1);if(a.preventDefault(),"unsubscribe-survey-form"===a.target.id)return a.target.querySelector("input[type='radio']:checked")?void unsubscribeSurvey(a):void a.target.classList.add("invalid");const b=a.target,c=b.email.value.trim();return b.email.value=c,sendPing(b,"Submit"),c&&isValidEmail(c)?b.classList.contains("email-scan")?void hashEmailAndSend(a):"subscribe-form"===a.target.id?(a.target.classList.add("loading-data"),addUser(a),setModalTabbing(),sendPing(a.target,"Success"),void ga_sendLegacyPing("SignUp_Complete",!1)):void 0:(sendPing(b,"Failure"),void b.classList.add("invalid"))}async function doButtonRouting(a){if("fxa-enabled"===document.body.dataset.fxaEnabled){if(a.target.classList.contains("sign-up-button")||"login-btn"===a.target.id||a.target.classList.contains("open-oauth"))return doOauth(a.target);}else if("sign-up"===a.target.id)return ga_sendLegacyPing("SignUp",!1),void openModalWindow();return"show-all-breaches"===a.target.id?(ga_sendLegacyPing("ShowAdditional",!1),showAdditionalBreaches()):"subscribe-fxa-btn"===a.target.id?(doOauth(),void closeModalWindow()):a.target.classList.contains("close-modal")?(ga_sendLegacyPing("CloseModal",a.target.dataset.analyticsLabel),void closeModalWindow()):void 0}function restoreInputs(){Array.from(document.forms).forEach(a=>{a.classList.remove("loading-data"),a.classList.remove("invalid")}),document.querySelectorAll("input").forEach(a=>{a.disabled&&(a.disabled=!1)})}const animateMobileMenuIcon=()=>{document.body.classList.contains("menu-open")?document.getElementById("menu-path").setAttribute("d","M5.293 6.707a1 1 0 1 1 1.414-1.414L12 10.586l5.293-5.293a1 1 0 1 1 1.414 1.414L13.414 12l5.293 5.293a1 1 0 0 1-1.414 1.414L12 13.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L10.586 12 5.293 6.707z"):document.getElementById("menu-path").setAttribute("d","M4 7a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm1 4a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2H5z")},toggleMobileMenu=()=>{document.body.classList.toggle("menu-open"),document.body.classList.toggle("menu-closed"),animateMobileMenuIcon()},toggleMobileFeatures=function(){const a=document.body;return 575<window.innerWidth?document.body.classList.contains("menu-open")?(document.body.classList.remove("menu-open"),void animateMobileMenuIcon()):void document.body.classList.remove("enable-mobile"):void(a.classList.add("enable-mobile"),document.getElementById("menu-icon-wrapper")&&(document.body.classList.add("menu-closed"),document.getElementById("menu-icon-wrapper").addEventListener("click",toggleMobileMenu),document.getElementById("bg-screen").addEventListener("click",toggleMobileMenu)))};document.addEventListener("touchstart",function(){},!0),window.addEventListener("pageshow",function(){ga_sendLegacyPing("Pageview",!1),window.location.search.includes("utm_")&&window.history.replaceState&&window.history.replaceState({},"",window.location.toString().replace(/[?&]utm_.*/g,"")),toggleMobileFeatures(),document.forms?(restoreInputs(),addFormListeners()):null}),"fxa-enabled"===document.body.dataset.fxaEnabled&&(toggleMobileFeatures(),window.addEventListener("resize",toggleMobileFeatures),document.getElementById("fxa-new-user-bar")&&document.getElementById("x-close").addEventListener("click",()=>{document.getElementById("fxa-new-user-bar").classList.toggle("close")}),window.navigator.language.includes("en")&&document.getElementById("login-btn")&&document.getElementById("login-btn").classList.add("capitalize")),document.getElementById("subpage")&&document.body.classList.add("sub"),(document.getElementById("latest-breaches")||document.getElementById("no-breaches"))&&document.getElementById("scan-another-email")&&document.getElementById("scan-another-email").classList.add("banner"),document.querySelectorAll("[data-analytics-event]").forEach(a=>{a.addEventListener("click",a=>{ga_sendLegacyPing(a.target.dataset.analyticsEvent,a.target.dataset.analyticsLabel)})}),document.querySelectorAll(".breach-logo").forEach(a=>{a.addEventListener("error",a=>{a.target.src="/img/logos/missing-logo-icon.png"})}),document.querySelectorAll("button, .open-oauth").forEach(a=>{a.addEventListener("click",a=>doButtonRouting(a))}),"use strict";const sha1=async a=>{a=a.toLowerCase();const b=new TextEncoder("utf-8").encode(a);let c=/edge/i.test(navigator.userAgent)?libpolycrypt.sha1(b):await crypto.subtle.digest("SHA-1",b);const d=Array.from(new Uint8Array(c)),e=d.map(a=>("00"+a.toString(16)).slice(-2)).join("");return e.toUpperCase()},hashEmailAndSend=async a=>{a.preventDefault();const b=a.target,c=document.getElementById("scan-email");b.classList.add("loading-data"),b.querySelector("input[name=emailHash]").value=await sha1(c.value),sessionStorage&&(console.log(sessionStorage),sessionStorage.setItem(`scanned_${sessionStorage.length+1}`,c.value),b.querySelector("input[name=scannedEmailId").value=sessionStorage.length),c.value="",sendPing(b,"Success"),b.submit()};"use strict",(async()=>{if(document.getElementById("scannedEmail")){const a=document.getElementById("scannedEmail"),b=a.dataset.scannedEmailId;a.textContent=sessionStorage.getItem(`scanned_${b}`)}})();